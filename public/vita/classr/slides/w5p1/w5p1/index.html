<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Advanced dplyr and More on RMarkdown - Data Science in Education</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Daniel Anderson" />
  <meta name="description" content="em { font-style: italic }   strong { font-weight: bold; }  Reviewing what we know Talk with your neighbor: How would you do each of the following using dplyr?  Extract only the first and third through ninth columns Extract the third column and any column that ends with &amp;ldquo;response&amp;rdquo; Reorder columns Extract only cases from students classified as English Language Learners (ELL) Create a new variable that represents the proportion of ELL students by grade Order the data in ascending or descending order Center a variable (i." />

  <meta name="keywords" content="Data Science, Education, Data Visualization" />






<meta name="generator" content="Hugo 0.36.1" />


<link rel="canonical" href="/vita/classr/slides/w5p1/w5p1/" />

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">







<link href="/dist/even.min.css?v=3.0.1" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">




<meta property="og:title" content="Advanced dplyr and More on RMarkdown" />
<meta property="og:description" content="em { font-style: italic }   strong { font-weight: bold; }  Reviewing what we know Talk with your neighbor: How would you do each of the following using dplyr?  Extract only the first and third through ninth columns Extract the third column and any column that ends with &ldquo;response&rdquo; Reorder columns Extract only cases from students classified as English Language Learners (ELL) Create a new variable that represents the proportion of ELL students by grade Order the data in ascending or descending order Center a variable (i." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/vita/classr/slides/w5p1/w5p1/" />
















<meta itemprop="name" content="Advanced dplyr and More on RMarkdown">
<meta itemprop="description" content="em { font-style: italic }   strong { font-weight: bold; }  Reviewing what we know Talk with your neighbor: How would you do each of the following using dplyr?  Extract only the first and third through ninth columns Extract the third column and any column that ends with &ldquo;response&rdquo; Reorder columns Extract only cases from students classified as English Language Learners (ELL) Create a new variable that represents the proportion of ELL students by grade Order the data in ascending or descending order Center a variable (i.">



<meta itemprop="wordCount" content="8178">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Advanced dplyr and More on RMarkdown"/>
<meta name="twitter:description" content="em { font-style: italic }   strong { font-weight: bold; }  Reviewing what we know Talk with your neighbor: How would you do each of the following using dplyr?  Extract only the first and third through ninth columns Extract the third column and any column that ends with &ldquo;response&rdquo; Reorder columns Extract only cases from students classified as English Language Learners (ELL) Create a new variable that represents the proportion of ELL students by grade Order the data in ascending or descending order Center a variable (i."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">datalorax</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/talks/talks/">
        <li class="mobile-menu-item">Talks</li>
      </a><a href="/vita/vita/">
        <li class="mobile-menu-item">Vita</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">datalorax</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/talks/talks/">Talks</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/vita/vita/">Vita</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
  <div class="post-content">
      

<style>
em {
  font-style: italic
}
</style>

<style>
strong {
  font-weight: bold;
}
</style>

<h2 id="reviewing-what-we-know">Reviewing what we know</h2>

<h1 id="talk-with-your-neighbor-how-would-you-do-each-of-the-following-using-dplyr">Talk with your neighbor: How would you do each of the following using <em>dplyr</em>?</h1>

<ul>
<li>Extract only the first and third through ninth columns</li>
<li>Extract the third column and any column that ends with &ldquo;response&rdquo;</li>
<li>Reorder columns</li>
<li>Extract only cases from students classified as English Language Learners (ELL)</li>
<li>Create a new variable that represents the proportion of ELL students by grade</li>
<li>Order the data in ascending or descending order</li>
<li>Center a variable (i.e., subtract the mean from each observation)</li>
<li>Compute the mean and standard deviation of a variable by one or more groups (e.g., mean math score for each school)</li>
</ul>

<hr />

<h2 id="first-let-s-load-in-some-data">First, let&rsquo;s load in some data</h2>

<pre><code class="language-r">library(rio)
mcrc &lt;- import(&quot;../../data/mcrc.csv&quot;, setclass = &quot;tbl_df&quot;, na = &quot;.&quot;) %&gt;% 
  janitor::clean_names()
mcrc
</code></pre>

<pre><code>## # A tibble: 72,948 x 47
##       id schid                      race           ethnicity   ell
##    &lt;int&gt; &lt;int&gt;                     &lt;chr&gt;               &lt;chr&gt; &lt;chr&gt;
##  1  8307   381                     White Not Hispanic/Latino      
##  2  8308   449                           Not Hispanic/Latino      
##  3  8309   817                     White Not Hispanic/Latino      
##  4  8310   979 Black or African American Not Hispanic/Latino      
##  5  8311    13                     White Not Hispanic/Latino      
##  6  8312   410 Black or African American     Hispanic/Latino     Y
##  7  8313   529                     White Not Hispanic/Latino      
##  8  8314   967 Black or African American Not Hispanic/Latino      
##  9  8315   589 Black or African American Not Hispanic/Latino      
## 10  8316   257                   Unknown             Unknown      
## # ... with 72,938 more rows, and 42 more variables: disability &lt;chr&gt;,
## #   score &lt;int&gt;, item_1_response &lt;int&gt;, item_1_correct &lt;chr&gt;,
## #   item_2_response &lt;int&gt;, item_2_correct &lt;chr&gt;, item_3_response &lt;int&gt;,
## #   item_3_correct &lt;chr&gt;, item_4_response &lt;int&gt;, item_4_correct &lt;chr&gt;,
## #   item_5_response &lt;int&gt;, item_5_correct &lt;chr&gt;, item_6_response &lt;int&gt;,
## #   item_6_correct &lt;chr&gt;, item_7_response &lt;int&gt;, item_7_correct &lt;chr&gt;,
## #   item_8_response &lt;int&gt;, item_8_correct &lt;chr&gt;, item_9_response &lt;int&gt;,
## #   item_9_correct &lt;chr&gt;, item_10_response &lt;int&gt;, item_10_correct &lt;chr&gt;,
## #   item_11_response &lt;int&gt;, item_11_correct &lt;chr&gt;, item_12_response &lt;int&gt;,
## #   item_12_correct &lt;chr&gt;, item_13_response &lt;int&gt;, item_13_correct &lt;chr&gt;,
## #   item_14_response &lt;int&gt;, item_14_correct &lt;chr&gt;, item_15_response &lt;int&gt;,
## #   item_15_correct &lt;chr&gt;, item_16_response &lt;int&gt;, item_16_correct &lt;chr&gt;,
## #   item_17_response &lt;int&gt;, item_17_correct &lt;chr&gt;, item_18_response &lt;int&gt;,
## #   item_18_correct &lt;chr&gt;, item_19_response &lt;int&gt;, item_19_correct &lt;chr&gt;,
## #   item_20_response &lt;int&gt;, item_20_correct &lt;chr&gt;
</code></pre>

<hr />

<ul>
<li>Extract only the first and third through ninth columns</li>
</ul>

<pre><code class="language-r">library(dplyr)
mcrc %&gt;% 
  select(1, 3:9)
</code></pre>

<pre><code>## # A tibble: 72,948 x 8
##       id                      race           ethnicity   ell disability
##    &lt;int&gt;                     &lt;chr&gt;               &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;
##  1  8307                     White Not Hispanic/Latino                 
##  2  8308                           Not Hispanic/Latino                 
##  3  8309                     White Not Hispanic/Latino                 
##  4  8310 Black or African American Not Hispanic/Latino                 
##  5  8311                     White Not Hispanic/Latino                 
##  6  8312 Black or African American     Hispanic/Latino     Y           
##  7  8313                     White Not Hispanic/Latino                 
##  8  8314 Black or African American Not Hispanic/Latino                 
##  9  8315 Black or African American Not Hispanic/Latino                 
## 10  8316                   Unknown             Unknown                 
## # ... with 72,938 more rows, and 3 more variables: score &lt;int&gt;,
## #   item_1_response &lt;int&gt;, item_1_correct &lt;chr&gt;
</code></pre>

<hr />

<ul>
<li>Extract the third column and any column that ends with &ldquo;response&rdquo;</li>
</ul>

<pre><code class="language-r">mcrc %&gt;% 
  select(3, ends_with(&quot;response&quot;))
</code></pre>

<pre><code>## # A tibble: 72,948 x 21
##                         race item_1_response item_2_response
##                        &lt;chr&gt;           &lt;int&gt;           &lt;int&gt;
##  1                     White               3               1
##  2                                         3               2
##  3                     White               3               1
##  4 Black or African American               3               1
##  5                     White               3               1
##  6 Black or African American               3               1
##  7                     White               3               1
##  8 Black or African American               1               1
##  9 Black or African American               1               1
## 10                   Unknown               3               1
## # ... with 72,938 more rows, and 18 more variables: item_3_response &lt;int&gt;,
## #   item_4_response &lt;int&gt;, item_5_response &lt;int&gt;, item_6_response &lt;int&gt;,
## #   item_7_response &lt;int&gt;, item_8_response &lt;int&gt;, item_9_response &lt;int&gt;,
## #   item_10_response &lt;int&gt;, item_11_response &lt;int&gt;,
## #   item_12_response &lt;int&gt;, item_13_response &lt;int&gt;,
## #   item_14_response &lt;int&gt;, item_15_response &lt;int&gt;,
## #   item_16_response &lt;int&gt;, item_17_response &lt;int&gt;,
## #   item_18_response &lt;int&gt;, item_19_response &lt;int&gt;, item_20_response &lt;int&gt;
</code></pre>

<hr />

<ul>
<li>Reorder columns</li>
</ul>

<pre><code class="language-r">mcrc %&gt;% 
  select(1:6, ends_with(&quot;correct&quot;), ends_with(&quot;response&quot;))
</code></pre>

<pre><code>## # A tibble: 72,948 x 46
##       id schid                      race           ethnicity   ell
##    &lt;int&gt; &lt;int&gt;                     &lt;chr&gt;               &lt;chr&gt; &lt;chr&gt;
##  1  8307   381                     White Not Hispanic/Latino      
##  2  8308   449                           Not Hispanic/Latino      
##  3  8309   817                     White Not Hispanic/Latino      
##  4  8310   979 Black or African American Not Hispanic/Latino      
##  5  8311    13                     White Not Hispanic/Latino      
##  6  8312   410 Black or African American     Hispanic/Latino     Y
##  7  8313   529                     White Not Hispanic/Latino      
##  8  8314   967 Black or African American Not Hispanic/Latino      
##  9  8315   589 Black or African American Not Hispanic/Latino      
## 10  8316   257                   Unknown             Unknown      
## # ... with 72,938 more rows, and 41 more variables: disability &lt;chr&gt;,
## #   item_1_correct &lt;chr&gt;, item_2_correct &lt;chr&gt;, item_3_correct &lt;chr&gt;,
## #   item_4_correct &lt;chr&gt;, item_5_correct &lt;chr&gt;, item_6_correct &lt;chr&gt;,
## #   item_7_correct &lt;chr&gt;, item_8_correct &lt;chr&gt;, item_9_correct &lt;chr&gt;,
## #   item_10_correct &lt;chr&gt;, item_11_correct &lt;chr&gt;, item_12_correct &lt;chr&gt;,
## #   item_13_correct &lt;chr&gt;, item_14_correct &lt;chr&gt;, item_15_correct &lt;chr&gt;,
## #   item_16_correct &lt;chr&gt;, item_17_correct &lt;chr&gt;, item_18_correct &lt;chr&gt;,
## #   item_19_correct &lt;chr&gt;, item_20_correct &lt;chr&gt;, item_1_response &lt;int&gt;,
## #   item_2_response &lt;int&gt;, item_3_response &lt;int&gt;, item_4_response &lt;int&gt;,
## #   item_5_response &lt;int&gt;, item_6_response &lt;int&gt;, item_7_response &lt;int&gt;,
## #   item_8_response &lt;int&gt;, item_9_response &lt;int&gt;, item_10_response &lt;int&gt;,
## #   item_11_response &lt;int&gt;, item_12_response &lt;int&gt;,
## #   item_13_response &lt;int&gt;, item_14_response &lt;int&gt;,
## #   item_15_response &lt;int&gt;, item_16_response &lt;int&gt;,
## #   item_17_response &lt;int&gt;, item_18_response &lt;int&gt;,
## #   item_19_response &lt;int&gt;, item_20_response &lt;int&gt;
</code></pre>

<hr />

<ul>
<li>Extract only cases from students classified as English Language Learners</li>
</ul>

<pre><code class="language-r">mcrc %&gt;% 
  filter(ell == &quot;Y&quot;)
</code></pre>

<pre><code>## # A tibble: 5,687 x 47
##       id schid                              race           ethnicity   ell
##    &lt;int&gt; &lt;int&gt;                             &lt;chr&gt;               &lt;chr&gt; &lt;chr&gt;
##  1  8312   410         Black or African American     Hispanic/Latino     Y
##  2  8323    32                             White Not Hispanic/Latino     Y
##  3  8326   520                             White     Hispanic/Latino     Y
##  4  8341   196 American Indian or Alaskan Native     Hispanic/Latino     Y
##  5  8388   620                             White     Hispanic/Latino     Y
##  6  8405   844                             White     Hispanic/Latino     Y
##  7  8409   585                             White Not Hispanic/Latino     Y
##  8  8417   390                             White Not Hispanic/Latino     Y
##  9  8442   851                                   Not Hispanic/Latino     Y
## 10  8459   374                             White Not Hispanic/Latino     Y
## # ... with 5,677 more rows, and 42 more variables: disability &lt;chr&gt;,
## #   score &lt;int&gt;, item_1_response &lt;int&gt;, item_1_correct &lt;chr&gt;,
## #   item_2_response &lt;int&gt;, item_2_correct &lt;chr&gt;, item_3_response &lt;int&gt;,
## #   item_3_correct &lt;chr&gt;, item_4_response &lt;int&gt;, item_4_correct &lt;chr&gt;,
## #   item_5_response &lt;int&gt;, item_5_correct &lt;chr&gt;, item_6_response &lt;int&gt;,
## #   item_6_correct &lt;chr&gt;, item_7_response &lt;int&gt;, item_7_correct &lt;chr&gt;,
## #   item_8_response &lt;int&gt;, item_8_correct &lt;chr&gt;, item_9_response &lt;int&gt;,
## #   item_9_correct &lt;chr&gt;, item_10_response &lt;int&gt;, item_10_correct &lt;chr&gt;,
## #   item_11_response &lt;int&gt;, item_11_correct &lt;chr&gt;, item_12_response &lt;int&gt;,
## #   item_12_correct &lt;chr&gt;, item_13_response &lt;int&gt;, item_13_correct &lt;chr&gt;,
## #   item_14_response &lt;int&gt;, item_14_correct &lt;chr&gt;, item_15_response &lt;int&gt;,
## #   item_15_correct &lt;chr&gt;, item_16_response &lt;int&gt;, item_16_correct &lt;chr&gt;,
## #   item_17_response &lt;int&gt;, item_17_correct &lt;chr&gt;, item_18_response &lt;int&gt;,
## #   item_18_correct &lt;chr&gt;, item_19_response &lt;int&gt;, item_19_correct &lt;chr&gt;,
## #   item_20_response &lt;int&gt;, item_20_correct &lt;chr&gt;
</code></pre>

<hr />

<ul>
<li>Create a new variable that represents the proportion of ELL students by grade</li>
</ul>

<pre><code class="language-r">mcrc %&gt;% 
  group_by(schid) %&gt;% 
  mutate(prop_ell = mean(ell == &quot;Y&quot;, na.rm = TRUE)) %&gt;% 
  select(1:2, prop_ell) 
</code></pre>

<pre><code>## # A tibble: 72,948 x 3
## # Groups:   schid [1,000]
##       id schid   prop_ell
##    &lt;int&gt; &lt;int&gt;      &lt;dbl&gt;
##  1  8307   381 0.07500000
##  2  8308   449 0.05747126
##  3  8309   817 0.07352941
##  4  8310   979 0.01408451
##  5  8311    13 0.08450704
##  6  8312   410 0.05128205
##  7  8313   529 0.16923077
##  8  8314   967 0.06818182
##  9  8315   589 0.07407407
## 10  8316   257 0.04347826
## # ... with 72,938 more rows
</code></pre>

<hr />

<ul>
<li>Order the data in ascending order</li>
</ul>

<pre><code class="language-r">mcrc %&gt;% 
  group_by(schid) %&gt;% 
  mutate(prop_ell = mean(ell == &quot;Y&quot;, na.rm = TRUE)) %&gt;% 
  select(1:2, prop_ell) %&gt;% 
  arrange(schid)
</code></pre>

<pre><code>## # A tibble: 72,948 x 3
## # Groups:   schid [1,000]
##       id schid   prop_ell
##    &lt;int&gt; &lt;int&gt;      &lt;dbl&gt;
##  1  6644     1 0.01408451
##  2 20444     1 0.01408451
##  3  2065     1 0.01408451
##  4 21933     1 0.01408451
##  5 22696     1 0.01408451
##  6 11418     1 0.01408451
##  7  6254     1 0.01408451
##  8 25539     1 0.01408451
##  9 26493     1 0.01408451
## 10 25447     1 0.01408451
## # ... with 72,938 more rows
</code></pre>

<hr />

<ul>
<li>Order the data in descending order</li>
</ul>

<pre><code class="language-r">mcrc %&gt;% 
  group_by(schid) %&gt;% 
  mutate(prop_ell = mean(ell == &quot;Y&quot;, na.rm = TRUE)) %&gt;% 
  select(1:2, prop_ell) %&gt;% 
  arrange(desc(prop_ell))
</code></pre>

<pre><code>## # A tibble: 72,948 x 3
## # Groups:   schid [1,000]
##       id schid  prop_ell
##    &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;
##  1 20102   369 0.2083333
##  2 20183   369 0.2083333
##  3  9954   369 0.2083333
##  4 10028   369 0.2083333
##  5   848   369 0.2083333
##  6  4032   369 0.2083333
##  7  2038   369 0.2083333
##  8  2318   369 0.2083333
##  9 22285   369 0.2083333
## 10 11200   369 0.2083333
## # ... with 72,938 more rows
</code></pre>

<hr />

<p>Center a variable (i.e., subtract the mean from each observation)</p>

<pre><code class="language-r">mcrc %&gt;% 
  mutate(score = scale(score, scale = FALSE)) %&gt;% 
  select(1:2, score)
</code></pre>

<pre><code>## # A tibble: 72,948 x 3
##       id schid      score
##    &lt;int&gt; &lt;int&gt;      &lt;dbl&gt;
##  1  8307   381 -0.3585705
##  2  8308   449  1.6414295
##  3  8309   817  3.6414295
##  4  8310   979 -2.3585705
##  5  8311    13  3.6414295
##  6  8312   410  3.6414295
##  7  8313   529  0.6414295
##  8  8314   967 -5.3585705
##  9  8315   589 -6.3585705
## 10  8316   257  2.6414295
## # ... with 72,938 more rows
</code></pre>

<hr />

<h2 id="quick-note-on-mutate">Quick note on<code>mutate()</code></h2>

<p>You can create a variable with <code>mutate()</code>, and then immediately call upon it for an additional calculation on the next line.</p>

<pre><code class="language-r">mcrc %&gt;% 
  group_by(schid) %&gt;% 
  mutate(sch_mean = mean(score, na.rm = TRUE),
         group_centered = score - sch_mean) %&gt;% 
  select(1:2, sch_mean, score, group_centered)
</code></pre>

<pre><code>## # A tibble: 72,948 x 5
## # Groups:   schid [1,000]
##       id schid sch_mean score group_centered
##    &lt;int&gt; &lt;int&gt;    &lt;dbl&gt; &lt;int&gt;          &lt;dbl&gt;
##  1  8307   381 13.96250    13      -0.962500
##  2  8308   449 13.67816    15       1.321839
##  3  8309   817 13.38235    17       3.617647
##  4  8310   979 13.12676    11      -2.126761
##  5  8311    13 13.33803    17       3.661972
##  6  8312   410 12.92308    17       4.076923
##  7  8313   529 13.20000    14       0.800000
##  8  8314   967 13.43182     8      -5.431818
##  9  8315   589 13.11111     7      -6.111111
## 10  8316   257 13.00000    16       3.000000
## # ... with 72,938 more rows
</code></pre>

<hr />

<p>Compute the mean and standard deviation of a variable by one or more groups (e.g., mean math score for each school)</p>

<p>(I randomly assigned school ids, so the fact they are very similar is not terribly surprising)</p>

<pre><code class="language-r">mcrc %&gt;% 
  group_by(schid) %&gt;% 
  summarize(mean = mean(score, na.rm = TRUE),
            sd = sd(score, na.rm = TRUE))
</code></pre>

<pre><code>## # A tibble: 1,000 x 3
##    schid     mean       sd
##    &lt;int&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1     1 13.45070 3.790170
##  2     2 13.47945 4.140282
##  3     3 13.48438 3.690366
##  4     4 12.27419 4.316075
##  5     5 13.36000 4.138285
##  6     6 13.36709 3.800058
##  7     7 13.81081 3.662755
##  8     8 13.62069 4.020995
##  9     9 13.88889 3.605768
## 10    10 13.61290 3.856198
## # ... with 990 more rows
</code></pre>

<hr />

<h2 id="slice"><code>slice()</code></h2>

<p>Extracts rows, like <code>filter()</code>, but does it by indexing
* Extract the first five rows</p>

<pre><code class="language-r">mcrc %&gt;% 
  slice(1:5)
</code></pre>

<pre><code>## # A tibble: 5 x 47
##      id schid                      race           ethnicity   ell
##   &lt;int&gt; &lt;int&gt;                     &lt;chr&gt;               &lt;chr&gt; &lt;chr&gt;
## 1  8307   381                     White Not Hispanic/Latino      
## 2  8308   449                           Not Hispanic/Latino      
## 3  8309   817                     White Not Hispanic/Latino      
## 4  8310   979 Black or African American Not Hispanic/Latino      
## 5  8311    13                     White Not Hispanic/Latino      
## # ... with 42 more variables: disability &lt;chr&gt;, score &lt;int&gt;,
## #   item_1_response &lt;int&gt;, item_1_correct &lt;chr&gt;, item_2_response &lt;int&gt;,
## #   item_2_correct &lt;chr&gt;, item_3_response &lt;int&gt;, item_3_correct &lt;chr&gt;,
## #   item_4_response &lt;int&gt;, item_4_correct &lt;chr&gt;, item_5_response &lt;int&gt;,
## #   item_5_correct &lt;chr&gt;, item_6_response &lt;int&gt;, item_6_correct &lt;chr&gt;,
## #   item_7_response &lt;int&gt;, item_7_correct &lt;chr&gt;, item_8_response &lt;int&gt;,
## #   item_8_correct &lt;chr&gt;, item_9_response &lt;int&gt;, item_9_correct &lt;chr&gt;,
## #   item_10_response &lt;int&gt;, item_10_correct &lt;chr&gt;, item_11_response &lt;int&gt;,
## #   item_11_correct &lt;chr&gt;, item_12_response &lt;int&gt;, item_12_correct &lt;chr&gt;,
## #   item_13_response &lt;int&gt;, item_13_correct &lt;chr&gt;, item_14_response &lt;int&gt;,
## #   item_14_correct &lt;chr&gt;, item_15_response &lt;int&gt;, item_15_correct &lt;chr&gt;,
## #   item_16_response &lt;int&gt;, item_16_correct &lt;chr&gt;, item_17_response &lt;int&gt;,
## #   item_17_correct &lt;chr&gt;, item_18_response &lt;int&gt;, item_18_correct &lt;chr&gt;,
## #   item_19_response &lt;int&gt;, item_19_correct &lt;chr&gt;, item_20_response &lt;int&gt;,
## #   item_20_correct &lt;chr&gt;
</code></pre>

<hr />

<ul>
<li><p>Remove the first five rows</p></li>

<li><p>Extract the first five rows</p></li>
</ul>

<pre><code class="language-r">mcrc %&gt;% 
  slice(-1:-5)
</code></pre>

<pre><code>## # A tibble: 72,943 x 47
##       id schid                      race           ethnicity   ell
##    &lt;int&gt; &lt;int&gt;                     &lt;chr&gt;               &lt;chr&gt; &lt;chr&gt;
##  1  8312   410 Black or African American     Hispanic/Latino     Y
##  2  8313   529                     White Not Hispanic/Latino      
##  3  8314   967 Black or African American Not Hispanic/Latino      
##  4  8315   589 Black or African American Not Hispanic/Latino      
##  5  8316   257                   Unknown             Unknown      
##  6  8317   277                     White Not Hispanic/Latino      
##  7  8318    55                     White Not Hispanic/Latino      
##  8  8319   253                     White Not Hispanic/Latino      
##  9  8320   633                     White Not Hispanic/Latino      
## 10  8321   215                     White Not Hispanic/Latino      
## # ... with 72,933 more rows, and 42 more variables: disability &lt;chr&gt;,
## #   score &lt;int&gt;, item_1_response &lt;int&gt;, item_1_correct &lt;chr&gt;,
## #   item_2_response &lt;int&gt;, item_2_correct &lt;chr&gt;, item_3_response &lt;int&gt;,
## #   item_3_correct &lt;chr&gt;, item_4_response &lt;int&gt;, item_4_correct &lt;chr&gt;,
## #   item_5_response &lt;int&gt;, item_5_correct &lt;chr&gt;, item_6_response &lt;int&gt;,
## #   item_6_correct &lt;chr&gt;, item_7_response &lt;int&gt;, item_7_correct &lt;chr&gt;,
## #   item_8_response &lt;int&gt;, item_8_correct &lt;chr&gt;, item_9_response &lt;int&gt;,
## #   item_9_correct &lt;chr&gt;, item_10_response &lt;int&gt;, item_10_correct &lt;chr&gt;,
## #   item_11_response &lt;int&gt;, item_11_correct &lt;chr&gt;, item_12_response &lt;int&gt;,
## #   item_12_correct &lt;chr&gt;, item_13_response &lt;int&gt;, item_13_correct &lt;chr&gt;,
## #   item_14_response &lt;int&gt;, item_14_correct &lt;chr&gt;, item_15_response &lt;int&gt;,
## #   item_15_correct &lt;chr&gt;, item_16_response &lt;int&gt;, item_16_correct &lt;chr&gt;,
## #   item_17_response &lt;int&gt;, item_17_correct &lt;chr&gt;, item_18_response &lt;int&gt;,
## #   item_18_correct &lt;chr&gt;, item_19_response &lt;int&gt;, item_19_correct &lt;chr&gt;,
## #   item_20_response &lt;int&gt;, item_20_correct &lt;chr&gt;
</code></pre>

<hr />

<h2 id="distinct"><code>distinct()</code></h2>

<p>Select rows that are distinct, according to a specific variable</p>

<pre><code class="language-r">mcrc %&gt;% 
  distinct(schid)
</code></pre>

<pre><code>## # A tibble: 1,000 x 1
##    schid
##    &lt;int&gt;
##  1   381
##  2   449
##  3   817
##  4   979
##  5    13
##  6   410
##  7   529
##  8   967
##  9   589
## 10   257
## # ... with 990 more rows
</code></pre>

<hr />

<h2 id="why-is-this-helpful">Why is this helpful</h2>

<ul>
<li>Probably most frequently used for removing duplicate records, or for joins, which we haven&rsquo;t talked about yet.</li>
<li>Also can be used to understand your data better

<ul>
<li>Number of rows from you output will be the number of distinct values (e.g., number of schools)</li>
<li>Can use distinct on multiple variable</li>
</ul></li>
<li>How many unique race/ethnicity combinations are there?</li>
</ul>

<pre><code class="language-r">mcrc %&gt;% 
  distinct(race, ethnicity)
</code></pre>

<pre><code>## # A tibble: 32 x 2
##                                 race           ethnicity
##                                &lt;chr&gt;               &lt;chr&gt;
##  1                             White Not Hispanic/Latino
##  2                                   Not Hispanic/Latino
##  3         Black or African American Not Hispanic/Latino
##  4         Black or African American     Hispanic/Latino
##  5                           Unknown             Unknown
##  6                             White     Hispanic/Latino
##  7                 Two or more races Not Hispanic/Latino
##  8                 Two or more races     Hispanic/Latino
##  9 American Indian or Alaskan Native Not Hispanic/Latino
## 10                             Asian Not Hispanic/Latino
## # ... with 22 more rows
</code></pre>

<hr />

<h2 id="why-is-this-helpful-1">Why is this helpful</h2>

<ul>
<li>Remove duplicate records (primary reason I find it helpful)

<ul>
<li>optional <code>.keep_all</code> argument
<br /></li>
</ul></li>
</ul>

<pre><code class="language-r">nrow(mcrc)
</code></pre>

<pre><code>## [1] 72948
</code></pre>

<pre><code class="language-r">mcrc %&gt;% 
  distinct(id, .keep_all = TRUE)
</code></pre>

<pre><code>## # A tibble: 36,474 x 47
##       id schid                      race           ethnicity   ell
##    &lt;int&gt; &lt;int&gt;                     &lt;chr&gt;               &lt;chr&gt; &lt;chr&gt;
##  1  8307   381                     White Not Hispanic/Latino      
##  2  8308   449                           Not Hispanic/Latino      
##  3  8309   817                     White Not Hispanic/Latino      
##  4  8310   979 Black or African American Not Hispanic/Latino      
##  5  8311    13                     White Not Hispanic/Latino      
##  6  8312   410 Black or African American     Hispanic/Latino     Y
##  7  8313   529                     White Not Hispanic/Latino      
##  8  8314   967 Black or African American Not Hispanic/Latino      
##  9  8315   589 Black or African American Not Hispanic/Latino      
## 10  8316   257                   Unknown             Unknown      
## # ... with 36,464 more rows, and 42 more variables: disability &lt;chr&gt;,
## #   score &lt;int&gt;, item_1_response &lt;int&gt;, item_1_correct &lt;chr&gt;,
## #   item_2_response &lt;int&gt;, item_2_correct &lt;chr&gt;, item_3_response &lt;int&gt;,
## #   item_3_correct &lt;chr&gt;, item_4_response &lt;int&gt;, item_4_correct &lt;chr&gt;,
## #   item_5_response &lt;int&gt;, item_5_correct &lt;chr&gt;, item_6_response &lt;int&gt;,
## #   item_6_correct &lt;chr&gt;, item_7_response &lt;int&gt;, item_7_correct &lt;chr&gt;,
## #   item_8_response &lt;int&gt;, item_8_correct &lt;chr&gt;, item_9_response &lt;int&gt;,
## #   item_9_correct &lt;chr&gt;, item_10_response &lt;int&gt;, item_10_correct &lt;chr&gt;,
## #   item_11_response &lt;int&gt;, item_11_correct &lt;chr&gt;, item_12_response &lt;int&gt;,
## #   item_12_correct &lt;chr&gt;, item_13_response &lt;int&gt;, item_13_correct &lt;chr&gt;,
## #   item_14_response &lt;int&gt;, item_14_correct &lt;chr&gt;, item_15_response &lt;int&gt;,
## #   item_15_correct &lt;chr&gt;, item_16_response &lt;int&gt;, item_16_correct &lt;chr&gt;,
## #   item_17_response &lt;int&gt;, item_17_correct &lt;chr&gt;, item_18_response &lt;int&gt;,
## #   item_18_correct &lt;chr&gt;, item_19_response &lt;int&gt;, item_19_correct &lt;chr&gt;,
## #   item_20_response &lt;int&gt;, item_20_correct &lt;chr&gt;
</code></pre>

<hr />

<h1 id="keep-all-unique-combinations-of-student-school-ids">Keep all unique combinations of student/school ids</h1>

<pre><code class="language-r">nrow(mcrc)
</code></pre>

<pre><code>## [1] 72948
</code></pre>

<pre><code class="language-r">mcrc %&gt;% 
  distinct(id, schid, .keep_all = TRUE)
</code></pre>

<pre><code>## # A tibble: 72,916 x 47
##       id schid                      race           ethnicity   ell
##    &lt;int&gt; &lt;int&gt;                     &lt;chr&gt;               &lt;chr&gt; &lt;chr&gt;
##  1  8307   381                     White Not Hispanic/Latino      
##  2  8308   449                           Not Hispanic/Latino      
##  3  8309   817                     White Not Hispanic/Latino      
##  4  8310   979 Black or African American Not Hispanic/Latino      
##  5  8311    13                     White Not Hispanic/Latino      
##  6  8312   410 Black or African American     Hispanic/Latino     Y
##  7  8313   529                     White Not Hispanic/Latino      
##  8  8314   967 Black or African American Not Hispanic/Latino      
##  9  8315   589 Black or African American Not Hispanic/Latino      
## 10  8316   257                   Unknown             Unknown      
## # ... with 72,906 more rows, and 42 more variables: disability &lt;chr&gt;,
## #   score &lt;int&gt;, item_1_response &lt;int&gt;, item_1_correct &lt;chr&gt;,
## #   item_2_response &lt;int&gt;, item_2_correct &lt;chr&gt;, item_3_response &lt;int&gt;,
## #   item_3_correct &lt;chr&gt;, item_4_response &lt;int&gt;, item_4_correct &lt;chr&gt;,
## #   item_5_response &lt;int&gt;, item_5_correct &lt;chr&gt;, item_6_response &lt;int&gt;,
## #   item_6_correct &lt;chr&gt;, item_7_response &lt;int&gt;, item_7_correct &lt;chr&gt;,
## #   item_8_response &lt;int&gt;, item_8_correct &lt;chr&gt;, item_9_response &lt;int&gt;,
## #   item_9_correct &lt;chr&gt;, item_10_response &lt;int&gt;, item_10_correct &lt;chr&gt;,
## #   item_11_response &lt;int&gt;, item_11_correct &lt;chr&gt;, item_12_response &lt;int&gt;,
## #   item_12_correct &lt;chr&gt;, item_13_response &lt;int&gt;, item_13_correct &lt;chr&gt;,
## #   item_14_response &lt;int&gt;, item_14_correct &lt;chr&gt;, item_15_response &lt;int&gt;,
## #   item_15_correct &lt;chr&gt;, item_16_response &lt;int&gt;, item_16_correct &lt;chr&gt;,
## #   item_17_response &lt;int&gt;, item_17_correct &lt;chr&gt;, item_18_response &lt;int&gt;,
## #   item_18_correct &lt;chr&gt;, item_19_response &lt;int&gt;, item_19_correct &lt;chr&gt;,
## #   item_20_response &lt;int&gt;, item_20_correct &lt;chr&gt;
</code></pre>

<hr />

<h2 id="count"><code>count()</code></h2>

<p>If want to know how many cases are within a grouping, use <code>count</code> (almost always in conjunction with <code>group_by</code>)</p>

<pre><code class="language-r">mcrc %&gt;% 
  count()
</code></pre>

<pre><code>## # A tibble: 1 x 1
##       n
##   &lt;int&gt;
## 1 72948
</code></pre>

<hr />

<pre><code class="language-r">mcrc %&gt;% 
  group_by(schid) %&gt;% 
  count()
</code></pre>

<pre><code>## # A tibble: 1,000 x 2
## # Groups:   schid [1,000]
##    schid     n
##    &lt;int&gt; &lt;int&gt;
##  1     1    71
##  2     2    73
##  3     3    64
##  4     4    62
##  5     5    75
##  6     6    79
##  7     7    74
##  8     8    87
##  9     9    72
## 10    10    93
## # ... with 990 more rows
</code></pre>

<hr />

<h1 id="what-are-the-number-of-ell-and-non-ell-student-for-each-school">What are the number of ELL and non-ELL student for each school?</h1>

<pre><code class="language-r">mcrc %&gt;% 
  group_by(schid, ell) %&gt;% 
  count()
</code></pre>

<pre><code>## # A tibble: 1,997 x 3
## # Groups:   schid, ell [1,997]
##    schid   ell     n
##    &lt;int&gt; &lt;chr&gt; &lt;int&gt;
##  1     1          70
##  2     1     Y     1
##  3     2          69
##  4     2     Y     4
##  5     3          59
##  6     3     Y     5
##  7     4          56
##  8     4     Y     6
##  9     5          70
## 10     5     Y     5
## # ... with 1,987 more rows
</code></pre>

<hr />

<p>Use <em>tidyr</em> tools to make it more readable</p>

<pre><code class="language-r">mcrc %&gt;% 
  mutate(ell = ifelse(ell == &quot;&quot;, &quot;N&quot;, ell)) %&gt;% 
  group_by(schid, ell) %&gt;% 
  count() %&gt;% 
  tidyr::spread(ell, n)
</code></pre>

<pre><code>## # A tibble: 1,000 x 3
## # Groups:   schid [1,000]
##    schid     N     Y
##  * &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1     1    70     1
##  2     2    69     4
##  3     3    59     5
##  4     4    56     6
##  5     5    70     5
##  6     6    72     7
##  7     7    67     7
##  8     8    81     6
##  9     9    69     3
## 10    10    89     4
## # ... with 990 more rows
</code></pre>

<hr />

<h2 id="random-sampling">Random Sampling</h2>

<h1 id="randomly-sample-100-observations">Randomly sample 100 observations</h1>

<pre><code class="language-r">mcrc %&gt;% 
  sample_n(100)
</code></pre>

<pre><code>## # A tibble: 100 x 47
##       id schid                              race           ethnicity   ell
##    &lt;int&gt; &lt;int&gt;                             &lt;chr&gt;               &lt;chr&gt; &lt;chr&gt;
##  1 19848   224 American Indian or Alaskan Native     Hispanic/Latino      
##  2 11436   676         Black or African American Not Hispanic/Latino      
##  3 11165   171                             White     Hispanic/Latino     Y
##  4 33492   488         Black or African American Not Hispanic/Latino      
##  5 23018   148                           Unknown             Unknown      
##  6 21701   901                             White Not Hispanic/Latino      
##  7 30001   606                             White Not Hispanic/Latino      
##  8 27983   776                             White Not Hispanic/Latino      
##  9  1261   178                             White     Hispanic/Latino      
## 10 18959   394                             White Not Hispanic/Latino      
## # ... with 90 more rows, and 42 more variables: disability &lt;chr&gt;,
## #   score &lt;int&gt;, item_1_response &lt;int&gt;, item_1_correct &lt;chr&gt;,
## #   item_2_response &lt;int&gt;, item_2_correct &lt;chr&gt;, item_3_response &lt;int&gt;,
## #   item_3_correct &lt;chr&gt;, item_4_response &lt;int&gt;, item_4_correct &lt;chr&gt;,
## #   item_5_response &lt;int&gt;, item_5_correct &lt;chr&gt;, item_6_response &lt;int&gt;,
## #   item_6_correct &lt;chr&gt;, item_7_response &lt;int&gt;, item_7_correct &lt;chr&gt;,
## #   item_8_response &lt;int&gt;, item_8_correct &lt;chr&gt;, item_9_response &lt;int&gt;,
## #   item_9_correct &lt;chr&gt;, item_10_response &lt;int&gt;, item_10_correct &lt;chr&gt;,
## #   item_11_response &lt;int&gt;, item_11_correct &lt;chr&gt;, item_12_response &lt;int&gt;,
## #   item_12_correct &lt;chr&gt;, item_13_response &lt;int&gt;, item_13_correct &lt;chr&gt;,
## #   item_14_response &lt;int&gt;, item_14_correct &lt;chr&gt;, item_15_response &lt;int&gt;,
## #   item_15_correct &lt;chr&gt;, item_16_response &lt;int&gt;, item_16_correct &lt;chr&gt;,
## #   item_17_response &lt;int&gt;, item_17_correct &lt;chr&gt;, item_18_response &lt;int&gt;,
## #   item_18_correct &lt;chr&gt;, item_19_response &lt;int&gt;, item_19_correct &lt;chr&gt;,
## #   item_20_response &lt;int&gt;, item_20_correct &lt;chr&gt;
</code></pre>

<h1 id="randomly-sample-1-observations">Randomly sample 1% observations</h1>

<pre><code class="language-r">mcrc %&gt;% 
  sample_frac(0.01)
</code></pre>

<pre><code>## # A tibble: 729 x 47
##       id schid                              race           ethnicity   ell
##    &lt;int&gt; &lt;int&gt;                             &lt;chr&gt;               &lt;chr&gt; &lt;chr&gt;
##  1 30764   929                             White Not Hispanic/Latino      
##  2  7543   681                             White     Hispanic/Latino      
##  3 28478   505                             Asian Not Hispanic/Latino      
##  4    51   466                 Two or more races Not Hispanic/Latino      
##  5 31413   589 American Indian or Alaskan Native     Hispanic/Latino     Y
##  6 17436   768         Black or African American     Hispanic/Latino      
##  7 33575   588                             White Not Hispanic/Latino      
##  8 12636   790                             White Not Hispanic/Latino      
##  9  7521   153                           Unknown             Unknown      
## 10  7290    19                             White Not Hispanic/Latino      
## # ... with 719 more rows, and 42 more variables: disability &lt;chr&gt;,
## #   score &lt;int&gt;, item_1_response &lt;int&gt;, item_1_correct &lt;chr&gt;,
## #   item_2_response &lt;int&gt;, item_2_correct &lt;chr&gt;, item_3_response &lt;int&gt;,
## #   item_3_correct &lt;chr&gt;, item_4_response &lt;int&gt;, item_4_correct &lt;chr&gt;,
## #   item_5_response &lt;int&gt;, item_5_correct &lt;chr&gt;, item_6_response &lt;int&gt;,
## #   item_6_correct &lt;chr&gt;, item_7_response &lt;int&gt;, item_7_correct &lt;chr&gt;,
## #   item_8_response &lt;int&gt;, item_8_correct &lt;chr&gt;, item_9_response &lt;int&gt;,
## #   item_9_correct &lt;chr&gt;, item_10_response &lt;int&gt;, item_10_correct &lt;chr&gt;,
## #   item_11_response &lt;int&gt;, item_11_correct &lt;chr&gt;, item_12_response &lt;int&gt;,
## #   item_12_correct &lt;chr&gt;, item_13_response &lt;int&gt;, item_13_correct &lt;chr&gt;,
## #   item_14_response &lt;int&gt;, item_14_correct &lt;chr&gt;, item_15_response &lt;int&gt;,
## #   item_15_correct &lt;chr&gt;, item_16_response &lt;int&gt;, item_16_correct &lt;chr&gt;,
## #   item_17_response &lt;int&gt;, item_17_correct &lt;chr&gt;, item_18_response &lt;int&gt;,
## #   item_18_correct &lt;chr&gt;, item_19_response &lt;int&gt;, item_19_correct &lt;chr&gt;,
## #   item_20_response &lt;int&gt;, item_20_correct &lt;chr&gt;
</code></pre>

<hr />

<h1 id="randomly-sample-5-observations-from-each-school">Randomly sample 5 observations from each school</h1>

<pre><code class="language-r">mcrc %&gt;% 
  group_by(schid) %&gt;% 
  sample_n(5) 
</code></pre>

<pre><code>## # A tibble: 5,000 x 47
## # Groups:   schid [1,000]
##       id schid                              race           ethnicity   ell
##    &lt;int&gt; &lt;int&gt;                             &lt;chr&gt;               &lt;chr&gt; &lt;chr&gt;
##  1 24677     1                             White Not Hispanic/Latino      
##  2 36036     1                             White     Hispanic/Latino     Y
##  3 27080     1 American Indian or Alaskan Native Not Hispanic/Latino      
##  4 10263     1                             White             Unknown      
##  5 27977     1                           Unknown             Unknown      
##  6 11802     2                             White Not Hispanic/Latino      
##  7  2773     2                           Unknown     Hispanic/Latino      
##  8 10515     2                 Two or more races     Hispanic/Latino      
##  9 10251     2                             White Not Hispanic/Latino      
## 10 24026     2                             White Not Hispanic/Latino      
## # ... with 4,990 more rows, and 42 more variables: disability &lt;chr&gt;,
## #   score &lt;int&gt;, item_1_response &lt;int&gt;, item_1_correct &lt;chr&gt;,
## #   item_2_response &lt;int&gt;, item_2_correct &lt;chr&gt;, item_3_response &lt;int&gt;,
## #   item_3_correct &lt;chr&gt;, item_4_response &lt;int&gt;, item_4_correct &lt;chr&gt;,
## #   item_5_response &lt;int&gt;, item_5_correct &lt;chr&gt;, item_6_response &lt;int&gt;,
## #   item_6_correct &lt;chr&gt;, item_7_response &lt;int&gt;, item_7_correct &lt;chr&gt;,
## #   item_8_response &lt;int&gt;, item_8_correct &lt;chr&gt;, item_9_response &lt;int&gt;,
## #   item_9_correct &lt;chr&gt;, item_10_response &lt;int&gt;, item_10_correct &lt;chr&gt;,
## #   item_11_response &lt;int&gt;, item_11_correct &lt;chr&gt;, item_12_response &lt;int&gt;,
## #   item_12_correct &lt;chr&gt;, item_13_response &lt;int&gt;, item_13_correct &lt;chr&gt;,
## #   item_14_response &lt;int&gt;, item_14_correct &lt;chr&gt;, item_15_response &lt;int&gt;,
## #   item_15_correct &lt;chr&gt;, item_16_response &lt;int&gt;, item_16_correct &lt;chr&gt;,
## #   item_17_response &lt;int&gt;, item_17_correct &lt;chr&gt;, item_18_response &lt;int&gt;,
## #   item_18_correct &lt;chr&gt;, item_19_response &lt;int&gt;, item_19_correct &lt;chr&gt;,
## #   item_20_response &lt;int&gt;, item_20_correct &lt;chr&gt;
</code></pre>

<hr />

<h2 id="slightly-more-compilcated">Slightly more compilcated</h2>

<p>How do we randomly select schools? (and keep all the data from each school)</p>

<ul>
<li>One method</li>
</ul>

<pre><code class="language-r">schools &lt;- mcrc %&gt;% 
  distinct(schid) %&gt;% 
  sample_n(10)
schools
</code></pre>

<pre><code>## # A tibble: 10 x 1
##    schid
##    &lt;int&gt;
##  1    24
##  2   555
##  3   736
##  4   243
##  5   767
##  6   820
##  7    92
##  8   782
##  9   433
## 10   232
</code></pre>

<hr />

<p>(there&rsquo;s actually a better way to do this, through a <code>semi_join</code>, but again, we haven&rsquo;t talked about joins yet)</p>

<pre><code class="language-r">mcrc %&gt;% 
  filter(schid %in% schools$schid)
</code></pre>

<pre><code>## # A tibble: 732 x 47
##       id schid                              race           ethnicity   ell
##    &lt;int&gt; &lt;int&gt;                             &lt;chr&gt;               &lt;chr&gt; &lt;chr&gt;
##  1  8387   232         Black or African American Not Hispanic/Latino      
##  2  8437   736                             White Not Hispanic/Latino      
##  3  8499   555                 Two or more races Not Hispanic/Latino      
##  4  8788   782                             White             Unknown      
##  5  8810   243                             White Not Hispanic/Latino      
##  6  8843   820                             White Not Hispanic/Latino      
##  7  8849   555                             Asian Not Hispanic/Latino      
##  8  9360   232 American Indian or Alaskan Native             Unknown      
##  9  9380    92                           Unknown             Unknown      
## 10  9410   232                             White Not Hispanic/Latino      
## # ... with 722 more rows, and 42 more variables: disability &lt;chr&gt;,
## #   score &lt;int&gt;, item_1_response &lt;int&gt;, item_1_correct &lt;chr&gt;,
## #   item_2_response &lt;int&gt;, item_2_correct &lt;chr&gt;, item_3_response &lt;int&gt;,
## #   item_3_correct &lt;chr&gt;, item_4_response &lt;int&gt;, item_4_correct &lt;chr&gt;,
## #   item_5_response &lt;int&gt;, item_5_correct &lt;chr&gt;, item_6_response &lt;int&gt;,
## #   item_6_correct &lt;chr&gt;, item_7_response &lt;int&gt;, item_7_correct &lt;chr&gt;,
## #   item_8_response &lt;int&gt;, item_8_correct &lt;chr&gt;, item_9_response &lt;int&gt;,
## #   item_9_correct &lt;chr&gt;, item_10_response &lt;int&gt;, item_10_correct &lt;chr&gt;,
## #   item_11_response &lt;int&gt;, item_11_correct &lt;chr&gt;, item_12_response &lt;int&gt;,
## #   item_12_correct &lt;chr&gt;, item_13_response &lt;int&gt;, item_13_correct &lt;chr&gt;,
## #   item_14_response &lt;int&gt;, item_14_correct &lt;chr&gt;, item_15_response &lt;int&gt;,
## #   item_15_correct &lt;chr&gt;, item_16_response &lt;int&gt;, item_16_correct &lt;chr&gt;,
## #   item_17_response &lt;int&gt;, item_17_correct &lt;chr&gt;, item_18_response &lt;int&gt;,
## #   item_18_correct &lt;chr&gt;, item_19_response &lt;int&gt;, item_19_correct &lt;chr&gt;,
## #   item_20_response &lt;int&gt;, item_20_correct &lt;chr&gt;
</code></pre>

<hr />

<h2 id="other-helper-functions-used-within-summarize">Other helper functions used within <code>summarize</code></h2>

<ul>
<li>We&rsquo;ve discussed <code>n()</code> - number of rows</li>
<li><code>n_distinct()</code> provides number of distinct values</li>
<li><code>first()</code> provides the first value</li>
<li><code>last()</code> provides the last value</li>
<li><code>nth()</code> provides the nth row</li>
</ul>

<hr />

<pre><code class="language-r">mcrc %&gt;% 
  group_by(schid) %&gt;% 
  summarize(n_students = n(),
            n_race_cats = n_distinct(race),
            n_eth_cats = n_distinct(ethnicity))
</code></pre>

<pre><code>## # A tibble: 1,000 x 4
##    schid n_students n_race_cats n_eth_cats
##    &lt;int&gt;      &lt;int&gt;       &lt;int&gt;      &lt;int&gt;
##  1     1         71           6          4
##  2     2         73           7          4
##  3     3         64           6          4
##  4     4         62           7          4
##  5     5         75           7          4
##  6     6         79           7          4
##  7     7         74           6          3
##  8     8         87           8          4
##  9     9         72           7          4
## 10    10         93           7          4
## # ... with 990 more rows
</code></pre>

<hr />

<p>Using the economics dataset from the <em>ggplot2</em> package, identify the population from the first, middle, and last observations of each year</p>

<pre><code class="language-r">ggplot2::economics %&gt;% 
  arrange(date) %&gt;% 
  tidyr::separate(date, c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;), sep = &quot;-&quot;) %&gt;% 
  group_by(year) %&gt;% 
  summarize(n_obs = n(),
            first_ob = first(pop),
            middle_ob = nth(pop, round(n_obs / 2)),
            last_ob = last(pop))
</code></pre>

<pre><code>## # A tibble: 49 x 5
##     year n_obs first_ob middle_ob last_ob
##    &lt;chr&gt; &lt;int&gt;    &lt;int&gt;     &lt;int&gt;   &lt;int&gt;
##  1  1967     6   198712    199113  199657
##  2  1968    12   199808    200536  201621
##  3  1969    12   201760    202507  203675
##  4  1970    12   203849    204830  206238
##  5  1971    12   206466    207462  208740
##  6  1972    12   208917    209725  210821
##  7  1973    12   210985    211746  212785
##  8  1974    12   212932    213686  214782
##  9  1975    12   214931    215768  216931
## 10  1976    12   217095    217861  219006
## # ... with 39 more rows
</code></pre>

<hr />

<h2 id="we-ve-seen-both-of-these-but-to-revisit">We&rsquo;ve seen both of these, but to revisit</h2>

<h1 id="recode-and-rename"><code>recode()</code> and <code>rename()</code></h1>

<p>(note, with recode I had troubles trying to use <code>&quot;&quot; = &quot;N&quot;</code>)</p>

<pre><code class="language-r">mcrc %&gt;% 
  rename(student_id = id) %&gt;% 
  mutate(ethnicity = recode(ethnicity, &quot;Unknown&quot; = &quot;NA&quot;),
         ell = recode(ell, &quot;Y&quot; = &quot;Yes&quot;, .default = &quot;No&quot;))
</code></pre>

<pre><code>## # A tibble: 72,948 x 47
##    student_id schid                      race           ethnicity   ell
##         &lt;int&gt; &lt;int&gt;                     &lt;chr&gt;               &lt;chr&gt; &lt;chr&gt;
##  1       8307   381                     White Not Hispanic/Latino    No
##  2       8308   449                           Not Hispanic/Latino    No
##  3       8309   817                     White Not Hispanic/Latino    No
##  4       8310   979 Black or African American Not Hispanic/Latino    No
##  5       8311    13                     White Not Hispanic/Latino    No
##  6       8312   410 Black or African American     Hispanic/Latino   Yes
##  7       8313   529                     White Not Hispanic/Latino    No
##  8       8314   967 Black or African American Not Hispanic/Latino    No
##  9       8315   589 Black or African American Not Hispanic/Latino    No
## 10       8316   257                   Unknown                  NA    No
## # ... with 72,938 more rows, and 42 more variables: disability &lt;chr&gt;,
## #   score &lt;int&gt;, item_1_response &lt;int&gt;, item_1_correct &lt;chr&gt;,
## #   item_2_response &lt;int&gt;, item_2_correct &lt;chr&gt;, item_3_response &lt;int&gt;,
## #   item_3_correct &lt;chr&gt;, item_4_response &lt;int&gt;, item_4_correct &lt;chr&gt;,
## #   item_5_response &lt;int&gt;, item_5_correct &lt;chr&gt;, item_6_response &lt;int&gt;,
## #   item_6_correct &lt;chr&gt;, item_7_response &lt;int&gt;, item_7_correct &lt;chr&gt;,
## #   item_8_response &lt;int&gt;, item_8_correct &lt;chr&gt;, item_9_response &lt;int&gt;,
## #   item_9_correct &lt;chr&gt;, item_10_response &lt;int&gt;, item_10_correct &lt;chr&gt;,
## #   item_11_response &lt;int&gt;, item_11_correct &lt;chr&gt;, item_12_response &lt;int&gt;,
## #   item_12_correct &lt;chr&gt;, item_13_response &lt;int&gt;, item_13_correct &lt;chr&gt;,
## #   item_14_response &lt;int&gt;, item_14_correct &lt;chr&gt;, item_15_response &lt;int&gt;,
## #   item_15_correct &lt;chr&gt;, item_16_response &lt;int&gt;, item_16_correct &lt;chr&gt;,
## #   item_17_response &lt;int&gt;, item_17_correct &lt;chr&gt;, item_18_response &lt;int&gt;,
## #   item_18_correct &lt;chr&gt;, item_19_response &lt;int&gt;, item_19_correct &lt;chr&gt;,
## #   item_20_response &lt;int&gt;, item_20_correct &lt;chr&gt;
</code></pre>

<hr />

<h2 id="conditional-verbs">Conditional verbs</h2>

<p><code>mutate</code>
If there are systematic manipulations, or many manipulation you need to make, use the conditional versions.</p>

<pre><code class="language-r">mcrc %&gt;% 
  mutate_if(is.character, as.factor)
</code></pre>

<pre><code>## # A tibble: 72,948 x 47
##       id schid                      race           ethnicity    ell
##    &lt;int&gt; &lt;int&gt;                    &lt;fctr&gt;              &lt;fctr&gt; &lt;fctr&gt;
##  1  8307   381                     White Not Hispanic/Latino       
##  2  8308   449                           Not Hispanic/Latino       
##  3  8309   817                     White Not Hispanic/Latino       
##  4  8310   979 Black or African American Not Hispanic/Latino       
##  5  8311    13                     White Not Hispanic/Latino       
##  6  8312   410 Black or African American     Hispanic/Latino      Y
##  7  8313   529                     White Not Hispanic/Latino       
##  8  8314   967 Black or African American Not Hispanic/Latino       
##  9  8315   589 Black or African American Not Hispanic/Latino       
## 10  8316   257                   Unknown             Unknown       
## # ... with 72,938 more rows, and 42 more variables: disability &lt;fctr&gt;,
## #   score &lt;int&gt;, item_1_response &lt;int&gt;, item_1_correct &lt;fctr&gt;,
## #   item_2_response &lt;int&gt;, item_2_correct &lt;fctr&gt;, item_3_response &lt;int&gt;,
## #   item_3_correct &lt;fctr&gt;, item_4_response &lt;int&gt;, item_4_correct &lt;fctr&gt;,
## #   item_5_response &lt;int&gt;, item_5_correct &lt;fctr&gt;, item_6_response &lt;int&gt;,
## #   item_6_correct &lt;fctr&gt;, item_7_response &lt;int&gt;, item_7_correct &lt;fctr&gt;,
## #   item_8_response &lt;int&gt;, item_8_correct &lt;fctr&gt;, item_9_response &lt;int&gt;,
## #   item_9_correct &lt;fctr&gt;, item_10_response &lt;int&gt;, item_10_correct &lt;fctr&gt;,
## #   item_11_response &lt;int&gt;, item_11_correct &lt;fctr&gt;,
## #   item_12_response &lt;int&gt;, item_12_correct &lt;fctr&gt;,
## #   item_13_response &lt;int&gt;, item_13_correct &lt;fctr&gt;,
## #   item_14_response &lt;int&gt;, item_14_correct &lt;fctr&gt;,
## #   item_15_response &lt;int&gt;, item_15_correct &lt;fctr&gt;,
## #   item_16_response &lt;int&gt;, item_16_correct &lt;fctr&gt;,
## #   item_17_response &lt;int&gt;, item_17_correct &lt;fctr&gt;,
## #   item_18_response &lt;int&gt;, item_18_correct &lt;fctr&gt;,
## #   item_19_response &lt;int&gt;, item_19_correct &lt;fctr&gt;,
## #   item_20_response &lt;int&gt;, item_20_correct &lt;fctr&gt;
</code></pre>

<hr />

<pre><code class="language-r">mcrc %&gt;% 
  mutate_if(is.numeric, scale)
</code></pre>

<pre><code>## # A tibble: 72,948 x 47
##            id      schid                      race           ethnicity
##         &lt;dbl&gt;      &lt;dbl&gt;                     &lt;chr&gt;               &lt;chr&gt;
##  1 -0.9431383 -0.4078646                     White Not Hispanic/Latino
##  2 -0.9430433 -0.1730446                           Not Hispanic/Latino
##  3 -0.9429483  1.0977462                     White Not Hispanic/Latino
##  4 -0.9428533  1.6571704 Black or African American Not Hispanic/Latino
##  5 -0.9427584 -1.6786554                     White Not Hispanic/Latino
##  6 -0.9426634 -0.3077208 Black or African American     Hispanic/Latino
##  7 -0.9425684  0.1032143                     White Not Hispanic/Latino
##  8 -0.9424735  1.6157316 Black or African American Not Hispanic/Latino
##  9 -0.9423785  0.3104084 Black or African American Not Hispanic/Latino
## 10 -0.9422835 -0.8360659                   Unknown             Unknown
## # ... with 72,938 more rows, and 43 more variables: ell &lt;chr&gt;,
## #   disability &lt;chr&gt;, score &lt;dbl&gt;, item_1_response &lt;dbl&gt;,
## #   item_1_correct &lt;chr&gt;, item_2_response &lt;dbl&gt;, item_2_correct &lt;chr&gt;,
## #   item_3_response &lt;dbl&gt;, item_3_correct &lt;chr&gt;, item_4_response &lt;dbl&gt;,
## #   item_4_correct &lt;chr&gt;, item_5_response &lt;dbl&gt;, item_5_correct &lt;chr&gt;,
## #   item_6_response &lt;dbl&gt;, item_6_correct &lt;chr&gt;, item_7_response &lt;dbl&gt;,
## #   item_7_correct &lt;chr&gt;, item_8_response &lt;dbl&gt;, item_8_correct &lt;chr&gt;,
## #   item_9_response &lt;dbl&gt;, item_9_correct &lt;chr&gt;, item_10_response &lt;dbl&gt;,
## #   item_10_correct &lt;chr&gt;, item_11_response &lt;dbl&gt;, item_11_correct &lt;chr&gt;,
## #   item_12_response &lt;dbl&gt;, item_12_correct &lt;chr&gt;, item_13_response &lt;dbl&gt;,
## #   item_13_correct &lt;chr&gt;, item_14_response &lt;dbl&gt;, item_14_correct &lt;chr&gt;,
## #   item_15_response &lt;dbl&gt;, item_15_correct &lt;chr&gt;, item_16_response &lt;dbl&gt;,
## #   item_16_correct &lt;chr&gt;, item_17_response &lt;dbl&gt;, item_17_correct &lt;chr&gt;,
## #   item_18_response &lt;dbl&gt;, item_18_correct &lt;chr&gt;, item_19_response &lt;dbl&gt;,
## #   item_19_correct &lt;chr&gt;, item_20_response &lt;dbl&gt;, item_20_correct &lt;chr&gt;
</code></pre>

<hr />

<pre><code class="language-r">mcrc %&gt;% 
  mutate_all(as.character)
</code></pre>

<pre><code>## # A tibble: 72,948 x 47
##       id schid                      race           ethnicity   ell
##    &lt;chr&gt; &lt;chr&gt;                     &lt;chr&gt;               &lt;chr&gt; &lt;chr&gt;
##  1  8307   381                     White Not Hispanic/Latino      
##  2  8308   449                           Not Hispanic/Latino      
##  3  8309   817                     White Not Hispanic/Latino      
##  4  8310   979 Black or African American Not Hispanic/Latino      
##  5  8311    13                     White Not Hispanic/Latino      
##  6  8312   410 Black or African American     Hispanic/Latino     Y
##  7  8313   529                     White Not Hispanic/Latino      
##  8  8314   967 Black or African American Not Hispanic/Latino      
##  9  8315   589 Black or African American Not Hispanic/Latino      
## 10  8316   257                   Unknown             Unknown      
## # ... with 72,938 more rows, and 42 more variables: disability &lt;chr&gt;,
## #   score &lt;chr&gt;, item_1_response &lt;chr&gt;, item_1_correct &lt;chr&gt;,
## #   item_2_response &lt;chr&gt;, item_2_correct &lt;chr&gt;, item_3_response &lt;chr&gt;,
## #   item_3_correct &lt;chr&gt;, item_4_response &lt;chr&gt;, item_4_correct &lt;chr&gt;,
## #   item_5_response &lt;chr&gt;, item_5_correct &lt;chr&gt;, item_6_response &lt;chr&gt;,
## #   item_6_correct &lt;chr&gt;, item_7_response &lt;chr&gt;, item_7_correct &lt;chr&gt;,
## #   item_8_response &lt;chr&gt;, item_8_correct &lt;chr&gt;, item_9_response &lt;chr&gt;,
## #   item_9_correct &lt;chr&gt;, item_10_response &lt;chr&gt;, item_10_correct &lt;chr&gt;,
## #   item_11_response &lt;chr&gt;, item_11_correct &lt;chr&gt;, item_12_response &lt;chr&gt;,
## #   item_12_correct &lt;chr&gt;, item_13_response &lt;chr&gt;, item_13_correct &lt;chr&gt;,
## #   item_14_response &lt;chr&gt;, item_14_correct &lt;chr&gt;, item_15_response &lt;chr&gt;,
## #   item_15_correct &lt;chr&gt;, item_16_response &lt;chr&gt;, item_16_correct &lt;chr&gt;,
## #   item_17_response &lt;chr&gt;, item_17_correct &lt;chr&gt;, item_18_response &lt;chr&gt;,
## #   item_18_correct &lt;chr&gt;, item_19_response &lt;chr&gt;, item_19_correct &lt;chr&gt;,
## #   item_20_response &lt;chr&gt;, item_20_correct &lt;chr&gt;
</code></pre>

<hr />

<pre><code class="language-r">mcrc %&gt;% 
  mutate_at(vars(race, ethnicity, ell), as.factor)
</code></pre>

<pre><code>## # A tibble: 72,948 x 47
##       id schid                      race           ethnicity    ell
##    &lt;int&gt; &lt;int&gt;                    &lt;fctr&gt;              &lt;fctr&gt; &lt;fctr&gt;
##  1  8307   381                     White Not Hispanic/Latino       
##  2  8308   449                           Not Hispanic/Latino       
##  3  8309   817                     White Not Hispanic/Latino       
##  4  8310   979 Black or African American Not Hispanic/Latino       
##  5  8311    13                     White Not Hispanic/Latino       
##  6  8312   410 Black or African American     Hispanic/Latino      Y
##  7  8313   529                     White Not Hispanic/Latino       
##  8  8314   967 Black or African American Not Hispanic/Latino       
##  9  8315   589 Black or African American Not Hispanic/Latino       
## 10  8316   257                   Unknown             Unknown       
## # ... with 72,938 more rows, and 42 more variables: disability &lt;chr&gt;,
## #   score &lt;int&gt;, item_1_response &lt;int&gt;, item_1_correct &lt;chr&gt;,
## #   item_2_response &lt;int&gt;, item_2_correct &lt;chr&gt;, item_3_response &lt;int&gt;,
## #   item_3_correct &lt;chr&gt;, item_4_response &lt;int&gt;, item_4_correct &lt;chr&gt;,
## #   item_5_response &lt;int&gt;, item_5_correct &lt;chr&gt;, item_6_response &lt;int&gt;,
## #   item_6_correct &lt;chr&gt;, item_7_response &lt;int&gt;, item_7_correct &lt;chr&gt;,
## #   item_8_response &lt;int&gt;, item_8_correct &lt;chr&gt;, item_9_response &lt;int&gt;,
## #   item_9_correct &lt;chr&gt;, item_10_response &lt;int&gt;, item_10_correct &lt;chr&gt;,
## #   item_11_response &lt;int&gt;, item_11_correct &lt;chr&gt;, item_12_response &lt;int&gt;,
## #   item_12_correct &lt;chr&gt;, item_13_response &lt;int&gt;, item_13_correct &lt;chr&gt;,
## #   item_14_response &lt;int&gt;, item_14_correct &lt;chr&gt;, item_15_response &lt;int&gt;,
## #   item_15_correct &lt;chr&gt;, item_16_response &lt;int&gt;, item_16_correct &lt;chr&gt;,
## #   item_17_response &lt;int&gt;, item_17_correct &lt;chr&gt;, item_18_response &lt;int&gt;,
## #   item_18_correct &lt;chr&gt;, item_19_response &lt;int&gt;, item_19_correct &lt;chr&gt;,
## #   item_20_response &lt;int&gt;, item_20_correct &lt;chr&gt;
</code></pre>

<hr />

<h1 id="group-by-if"><code>group_by_if</code></h1>

<pre><code class="language-r">mcrc %&gt;% 
  select(-starts_with(&quot;item&quot;)) %&gt;% 
  group_by_if(is.character) %&gt;% 
  summarize(mean = mean(score, na.rm = TRUE))
</code></pre>

<pre><code>## # A tibble: 116 x 5
## # Groups:   race, ethnicity, ell [?]
##     race           ethnicity   ell disability     mean
##    &lt;chr&gt;               &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;    &lt;dbl&gt;
##  1                                            13.28889
##  2                                          Y 12.83333
##  3                               Y            10.33333
##  4                               Y          Y  8.00000
##  5           Hispanic/Latino                  13.31176
##  6           Hispanic/Latino                Y 11.04762
##  7           Hispanic/Latino     Y            11.61364
##  8           Hispanic/Latino     Y          Y 10.36364
##  9       Not Hispanic/Latino                  14.92762
## 10       Not Hispanic/Latino                Y 11.62121
## # ... with 106 more rows
</code></pre>

<hr />

<h2 id="summarize-versions">summarize_versions</h2>

<pre><code class="language-r">mcrc %&gt;% 
  summarize_if(is.numeric, funs(mean, sd))
</code></pre>

<pre><code>## # A tibble: 1 x 46
##   id_mean schid_mean score_mean item_1_response_mean item_2_response_mean
##     &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;                &lt;dbl&gt;                &lt;dbl&gt;
## 1 18237.5   499.1108   13.35857                   NA                   NA
## # ... with 41 more variables: item_3_response_mean &lt;dbl&gt;,
## #   item_4_response_mean &lt;dbl&gt;, item_5_response_mean &lt;dbl&gt;,
## #   item_6_response_mean &lt;dbl&gt;, item_7_response_mean &lt;dbl&gt;,
## #   item_8_response_mean &lt;dbl&gt;, item_9_response_mean &lt;dbl&gt;,
## #   item_10_response_mean &lt;dbl&gt;, item_11_response_mean &lt;dbl&gt;,
## #   item_12_response_mean &lt;dbl&gt;, item_13_response_mean &lt;dbl&gt;,
## #   item_14_response_mean &lt;dbl&gt;, item_15_response_mean &lt;dbl&gt;,
## #   item_16_response_mean &lt;dbl&gt;, item_17_response_mean &lt;dbl&gt;,
## #   item_18_response_mean &lt;dbl&gt;, item_19_response_mean &lt;dbl&gt;,
## #   item_20_response_mean &lt;dbl&gt;, id_sd &lt;dbl&gt;, schid_sd &lt;dbl&gt;,
## #   score_sd &lt;dbl&gt;, item_1_response_sd &lt;dbl&gt;, item_2_response_sd &lt;dbl&gt;,
## #   item_3_response_sd &lt;dbl&gt;, item_4_response_sd &lt;dbl&gt;,
## #   item_5_response_sd &lt;dbl&gt;, item_6_response_sd &lt;dbl&gt;,
## #   item_7_response_sd &lt;dbl&gt;, item_8_response_sd &lt;dbl&gt;,
## #   item_9_response_sd &lt;dbl&gt;, item_10_response_sd &lt;dbl&gt;,
## #   item_11_response_sd &lt;dbl&gt;, item_12_response_sd &lt;dbl&gt;,
## #   item_13_response_sd &lt;dbl&gt;, item_14_response_sd &lt;dbl&gt;,
## #   item_15_response_sd &lt;dbl&gt;, item_16_response_sd &lt;dbl&gt;,
## #   item_17_response_sd &lt;dbl&gt;, item_18_response_sd &lt;dbl&gt;,
## #   item_19_response_sd &lt;dbl&gt;, item_20_response_sd &lt;dbl&gt;
</code></pre>

<hr />

<pre><code class="language-r">mcrc %&gt;% 
  select(contains(&quot;correct&quot;)) %&gt;% 
  mutate_all(funs(ifelse(. == &quot;Y&quot;, 1, 0))) %&gt;% 
  summarize_all(funs(mean, sd))
</code></pre>

<pre><code>## # A tibble: 1 x 40
##   item_1_correct_mean item_2_correct_mean item_3_correct_mean
##                 &lt;dbl&gt;               &lt;dbl&gt;               &lt;dbl&gt;
## 1           0.8860284           0.8216675           0.8473707
## # ... with 37 more variables: item_4_correct_mean &lt;dbl&gt;,
## #   item_5_correct_mean &lt;dbl&gt;, item_6_correct_mean &lt;dbl&gt;,
## #   item_7_correct_mean &lt;dbl&gt;, item_8_correct_mean &lt;dbl&gt;,
## #   item_9_correct_mean &lt;dbl&gt;, item_10_correct_mean &lt;dbl&gt;,
## #   item_11_correct_mean &lt;dbl&gt;, item_12_correct_mean &lt;dbl&gt;,
## #   item_13_correct_mean &lt;dbl&gt;, item_14_correct_mean &lt;dbl&gt;,
## #   item_15_correct_mean &lt;dbl&gt;, item_16_correct_mean &lt;dbl&gt;,
## #   item_17_correct_mean &lt;dbl&gt;, item_18_correct_mean &lt;dbl&gt;,
## #   item_19_correct_mean &lt;dbl&gt;, item_20_correct_mean &lt;dbl&gt;,
## #   item_1_correct_sd &lt;dbl&gt;, item_2_correct_sd &lt;dbl&gt;,
## #   item_3_correct_sd &lt;dbl&gt;, item_4_correct_sd &lt;dbl&gt;,
## #   item_5_correct_sd &lt;dbl&gt;, item_6_correct_sd &lt;dbl&gt;,
## #   item_7_correct_sd &lt;dbl&gt;, item_8_correct_sd &lt;dbl&gt;,
## #   item_9_correct_sd &lt;dbl&gt;, item_10_correct_sd &lt;dbl&gt;,
## #   item_11_correct_sd &lt;dbl&gt;, item_12_correct_sd &lt;dbl&gt;,
## #   item_13_correct_sd &lt;dbl&gt;, item_14_correct_sd &lt;dbl&gt;,
## #   item_15_correct_sd &lt;dbl&gt;, item_16_correct_sd &lt;dbl&gt;,
## #   item_17_correct_sd &lt;dbl&gt;, item_18_correct_sd &lt;dbl&gt;,
## #   item_19_correct_sd &lt;dbl&gt;, item_20_correct_sd &lt;dbl&gt;
</code></pre>

<hr />

<h2 id="challege-more-from-last-class">Challege (more from last class)</h2>

<ul>
<li>Make the output more readable (tidy)</li>
<li>Produce a plot</li>
</ul>

<hr />

<h1 id="what-i-asked-for">What I asked for</h1>

<pre><code class="language-r">library(tidyverse)
mcrc %&gt;% 
  select(contains(&quot;correct&quot;)) %&gt;% 
  mutate_all(funs(ifelse(. == &quot;Y&quot;, 1, 0))) %&gt;% 
  summarize_all(funs(mean, sd)) %&gt;% 
  gather(var, val) %&gt;% 
  separate(var, c(&quot;dis1&quot;, &quot;item&quot;, &quot;dis2&quot;, &quot;stat&quot;), sep = &quot;_&quot;, convert = TRUE) %&gt;% 
  select(-contains(&quot;dis&quot;)) %&gt;% 
  spread(stat, val)
</code></pre>

<pre><code>## # A tibble: 20 x 3
##     item      mean        sd
##  * &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;
##  1     1 0.8860284 0.3177789
##  2     2 0.8216675 0.3827950
##  3     3 0.8473707 0.3596322
##  4     4 0.3674261 0.4821072
##  5     5 0.8232714 0.3814415
##  6     6 0.7587871 0.4278221
##  7     7 0.6976202 0.4592920
##  8     8 0.8444234 0.3624559
##  9     9 0.8109064 0.3915856
## 10    10 0.2025415 0.4018964
## 11    11 0.8015436 0.3988404
## 12    12 0.2322065 0.4222429
## 13    13 0.6006470 0.4897688
## 14    14 0.7442973 0.4362584
## 15    15 0.8482207 0.3588093
## 16    16 0.6481740 0.4775433
## 17    17 0.6992104 0.4586045
## 18    18 0.3842052 0.4864101
## 19    19 0.7533723 0.4310511
## 20    20 0.5866508 0.4924378
</code></pre>

<hr />

<h1 id="better-approach-tidy-first">Better approach - tidy first</h1>

<pre><code class="language-r">itm_summary &lt;- mcrc %&gt;% 
  select(contains(&quot;correct&quot;)) %&gt;% 
  gather(item, response) %&gt;% 
  mutate(item = parse_number(item),
         response = ifelse(response == &quot;Y&quot;, 1, 0)) %&gt;% 
  group_by(item) %&gt;% 
  summarize(mean = mean(response), 
            se = sundry::se(response))
itm_summary
</code></pre>

<pre><code>## # A tibble: 20 x 3
##     item      mean          se
##    &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;
##  1     1 0.8860284 0.001176572
##  2     2 0.8216675 0.001417293
##  3     3 0.8473707 0.001331533
##  4     4 0.3674261 0.001784995
##  5     5 0.8232714 0.001412281
##  6     6 0.7587871 0.001584005
##  7     7 0.6976202 0.001700522
##  8     8 0.8444234 0.001341988
##  9     9 0.8109064 0.001449840
## 10    10 0.2025415 0.001488015
## 11    11 0.8015436 0.001476701
## 12    12 0.2322065 0.001563348
## 13    13 0.6006470 0.001813362
## 14    14 0.7442973 0.001615240
## 15    15 0.8482207 0.001328486
## 16    16 0.6481740 0.001768097
## 17    17 0.6992104 0.001697976
## 18    18 0.3842052 0.001800926
## 19    19 0.7533723 0.001595960
## 20    20 0.5866508 0.001823243
</code></pre>

<hr />

<h2 id="plot">plot</h2>

<p>One potential</p>

<pre><code class="language-r">theme_set(theme_light())
ggplot(itm_summary, aes(x = item, y = mean)) +
  geom_point(color = &quot;gray60&quot;) +
  ylim(0, 1) +
  geom_errorbar(aes(ymin = mean - 2*se, ymax = mean + 2*se), width = 0.5, color = &quot;gray60&quot;)
</code></pre>

<p><img src="../assets/fig/plot-1.png" alt="plot of chunk plot" /></p>

<hr />

<h2 id="things-i-want-to-cover">Things I want to cover</h2>

<ul>
<li>Chunk options</li>
<li>Setting global options</li>
<li>Inline code evaluation</li>
<li>Citations</li>
<li>Caching (briefly)</li>
<li>Brief look at the <em>papaja</em> package</li>
<li>Practice (if time allows)</li>
</ul>

<hr />

<h2 id="code-chunks">Code chunks</h2>

<p>Start a code chunk with ```{r chunkName, chunkOptions}, then produce some r code, then close the chunk with three additional back ticks ```.</p>

<p><img src="../assets/img/codeChunk1.png" alt="codechunk1" /></p>

<pre><code class="language-r">a &lt;- 3
b &lt;- 5

a + b * (exp(a)/b)
</code></pre>

<pre><code>## [1] 23.08554
</code></pre>

<hr />

<h2 id="a-few-select-chunk-options">A few select chunk options</h2>

<table>
<thead>
<tr>
<th align="left">Options</th>
<th align="left">Arguments</th>
<th align="left">Default</th>
<th align="left">Result</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">eval</td>
<td align="left">logical</td>
<td align="left">TRUE</td>
<td align="left">Evaluate the code?</td>
</tr>

<tr>
<td align="left">echo</td>
<td align="left">logical</td>
<td align="left">TRUE</td>
<td align="left">Show the code?</td>
</tr>

<tr>
<td align="left">results</td>
<td align="left">markup, asis, hold, hide</td>
<td align="left">markup</td>
<td align="left">Render the results</td>
</tr>

<tr>
<td align="left">warning</td>
<td align="left">logical</td>
<td align="left">TRUE</td>
<td align="left">Print warnings?</td>
</tr>

<tr>
<td align="left">error</td>
<td align="left">logical</td>
<td align="left">TRUE</td>
<td align="left">Preserve errors? (if FALSE, quit)</td>
</tr>

<tr>
<td align="left">message</td>
<td align="left">logical</td>
<td align="left">TRUE</td>
<td align="left">Print any messages?</td>
</tr>

<tr>
<td align="left">include</td>
<td align="left">logical</td>
<td align="left">TRUE</td>
<td align="left">Include any of the code or output or code?</td>
</tr>

<tr>
<td align="left">tidy</td>
<td align="left">logical</td>
<td align="left">FALSE</td>
<td align="left">Tidy code? (see formatR package)</td>
</tr>
</tbody>
</table>

<hr />

<h1 id="and-a-few-more">(and a few more)</h1>

<table>
<thead>
<tr>
<th align="left"></th>
<th align="left">Options</th>
<th align="left">Arguments</th>
<th align="left">Default</th>
<th align="left">Result</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">9</td>
<td align="left">cache</td>
<td align="left">logical, 0:3</td>
<td align="left">FALSE</td>
<td align="left">Cache code chunks?</td>
</tr>

<tr>
<td align="left">10</td>
<td align="left">cache.comments</td>
<td align="left">logical</td>
<td align="left">NULL</td>
<td align="left">Cache invalidated by comment changes?</td>
</tr>

<tr>
<td align="left">11</td>
<td align="left">dependson</td>
<td align="left">char, num</td>
<td align="left">NULL</td>
<td align="left">Current chunk depend on prior cached chunks?</td>
</tr>

<tr>
<td align="left">12</td>
<td align="left">autodep</td>
<td align="left">logical</td>
<td align="left">FALSE</td>
<td align="left">Should dependencies be determined automatically? (if TRUE, no need for dependson)</td>
</tr>

<tr>
<td align="left">13</td>
<td align="left">fig.height/fig.width</td>
<td align="left">numeric</td>
<td align="left">7, 7</td>
<td align="left">Height and width of figure</td>
</tr>

<tr>
<td align="left">14</td>
<td align="left">fig.show</td>
<td align="left">asis, hold, animate, hide</td>
<td align="left">asis</td>
<td align="left">How the figure should be displayed</td>
</tr>

<tr>
<td align="left">15</td>
<td align="left">interval</td>
<td align="left">numeric</td>
<td align="left">1</td>
<td align="left">Interval (speed) When fig.show = &lsquo;animate&rsquo;</td>
</tr>
</tbody>
</table>

<p>For complete documentation, see <a href="http://yihui.name/knitr/options/">http://yihui.name/knitr/options/</a></p>

<hr />

<h2 id="echo-and-eval">echo and eval</h2>

<p>You can show code without evaluating it, using <code>eval = FALSE</code>.</p>

<div align = "left">
<img src = ../assets/img/codeChunk2.png width = 400 height = 100>
</div>

<pre><code class="language-r">a + b * (exp(a)/b)
</code></pre>

<p>Alternatively, you can evaluate the code without displaying it, using <code>echo = 
  FALSE</code>.</p>

<div align = "left">
<img src = ../assets/img/codeChunk3.png width = 550 height = 150>
</div>

<p><img src="../assets/fig/plotExample-1.png" alt="plot of chunk plotExample" /></p>

<hr />

<h2 id="warning">warning</h2>

<h1 id="warning-false">Warning = FALSE</h1>

<pre><code class="language-r">ggplot(msleep, 
  aes(sleep_rem, sleep_total)) + 
  geom_point()
</code></pre>

<p><img src="../assets/fig/ggplotWarning2-1.png" alt="plot of chunk ggplotWarning2" />
Warning is printed to the console when rendering.</p>

<h1 id="warning-true">Warning = TRUE</h1>

<pre><code class="language-r">ggplot(msleep, 
  aes(sleep_rem, sleep_total)) + 
  geom_point()
</code></pre>

<pre><code>## Warning: Removed 22 rows containing missing values (geom_point).
</code></pre>

<p><img src="../assets/fig/ggplotWarning1-1.png" alt="plot of chunk ggplotWarning1" /></p>

<hr />

<h2 id="show-errors">Show errors</h2>

<h1 id="default">Default</h1>

<pre><code class="language-r">ggplot(msleep, 
  aes(sleep, sleep_total)) + 
  geom_point()
</code></pre>

<pre><code>## Don't know how to automatically pick scale for object of type data.frame. Defaulting to continuous.
</code></pre>

<pre><code>## Error: Aesthetics must be either length 1 or the same as the data (83): x, y
</code></pre>

<p><br></p>

<p>If <code>error = FALSE</code>, the document won&rsquo;t render if it encounters an error.</p>

<p><img src="../assets/img/errorRendering.png" alt="errorRendering" /></p>

<hr />

<h2 id="message">Message</h2>

<p>Some functions will return messages. You may want to suppress these.</p>

<h1 id="message-false">message = FALSE</h1>

<pre><code class="language-r">ggplot(msleep,
  aes(sleep_total)) +
  geom_histogram()
</code></pre>

<p><img src="../assets/fig/messages2-1.png" alt="plot of chunk messages2" /></p>

<h1 id="message-true">message = TRUE</h1>

<pre><code class="language-r">ggplot(msleep,
  aes(sleep_total)) +
  geom_histogram()
</code></pre>

<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
</code></pre>

<p><img src="../assets/fig/messages1-1.png" alt="plot of chunk messages1" /></p>

<hr />

<h2 id="tidy">tidy</h2>

<h1 id="tidy-false">Tidy = FALSE</h1>

<pre><code class="language-r">matRow&lt;-matrix(c(10,11,12,13,20,21,22,23,
  30,31,32,33),nrow=3,ncol=4,byrow=TRUE)

matRow&lt;-matrix(c(10,11,12,13,
                 20,21,22,23,
                 30,31,32,33),
nrow=3,ncol=4,byrow=TRUE)
</code></pre>

<h1 id="tidy-true">Tidy = TRUE</h1>

<pre><code class="language-r">matRow &lt;- matrix(c(10, 11, 12, 13, 20, 21, 22, 23, 30, 31, 32, 33), nrow = 3, 
    ncol = 4, byrow = TRUE)

matRow &lt;- matrix(c(10, 11, 12, 13, 20, 21, 22, 23, 30, 31, 32, 33), nrow = 3, 
    ncol = 4, byrow = TRUE)
</code></pre>

<p>(It can only do so much, and sometimes ends up looking worse. Follow a style! Don&rsquo;t rely on this.)</p>

<hr />

<h2 id="include">include</h2>

<p><img src="../assets/img/includeFALSE.png" alt="includeFALSE" /></p>

<p>The <code>include</code> argument is used to evaluate code that is not included in the
document at all. For example, when setting up your global options.</p>

<hr />

<h2 id="other-options-for-results-hold">Other options for results: <code>hold</code></h2>

<pre><code class="language-r">m1 &lt;- lm(mpg ~ ., data = mtcars)
coef(m1)
coef(summary(m1))[, &quot;Std. Error&quot;]
arm::display(m1)
</code></pre>

<pre><code>## (Intercept)         cyl        disp          hp        drat          wt 
## 12.30337416 -0.11144048  0.01333524 -0.02148212  0.78711097 -3.71530393 
##        qsec          vs          am        gear        carb 
##  0.82104075  0.31776281  2.52022689  0.65541302 -0.19941925 
## (Intercept)         cyl        disp          hp        drat          wt 
## 18.71788443  1.04502336  0.01785750  0.02176858  1.63537307  1.89441430 
##        qsec          vs          am        gear        carb 
##  0.73084480  2.10450861  2.05665055  1.49325996  0.82875250 
## lm(formula = mpg ~ ., data = mtcars)
##             coef.est coef.se
## (Intercept) 12.30    18.72  
## cyl         -0.11     1.05  
## disp         0.01     0.02  
## hp          -0.02     0.02  
## drat         0.79     1.64  
## wt          -3.72     1.89  
## qsec         0.82     0.73  
## vs           0.32     2.10  
## am           2.52     2.06  
## gear         0.66     1.49  
## carb        -0.20     0.83  
## ---
## n = 32, k = 11
## residual sd = 2.65, R-Squared = 0.87
</code></pre>

<hr />

<h2 id="same-chunk-no-hold">Same chunk, no hold</h2>

<pre><code class="language-r">m1 &lt;- lm(mpg ~ ., data = mtcars)
coef(m1)
</code></pre>

<pre><code>## (Intercept)         cyl        disp          hp        drat          wt 
## 12.30337416 -0.11144048  0.01333524 -0.02148212  0.78711097 -3.71530393 
##        qsec          vs          am        gear        carb 
##  0.82104075  0.31776281  2.52022689  0.65541302 -0.19941925
</code></pre>

<pre><code class="language-r">coef(summary(m1))[, &quot;Std. Error&quot;]
</code></pre>

<pre><code>## (Intercept)         cyl        disp          hp        drat          wt 
## 18.71788443  1.04502336  0.01785750  0.02176858  1.63537307  1.89441430 
##        qsec          vs          am        gear        carb 
##  0.73084480  2.10450861  2.05665055  1.49325996  0.82875250
</code></pre>

<pre><code class="language-r">arm::display(m1)
</code></pre>

<pre><code>## lm(formula = mpg ~ ., data = mtcars)
##             coef.est coef.se
## (Intercept) 12.30    18.72  
## cyl         -0.11     1.05  
## disp         0.01     0.02  
## hp          -0.02     0.02  
## drat         0.79     1.64  
## wt          -3.72     1.89  
## qsec         0.82     0.73  
## vs           0.32     2.10  
## am           2.52     2.06  
## gear         0.66     1.49  
## carb        -0.20     0.83  
## ---
## n = 32, k = 11
## residual sd = 2.65, R-Squared = 0.87
</code></pre>

<hr />

<h2 id="hold-figures">Hold figures</h2>

<h1 id="fig-show-hold"><code>fig.show = &quot;hold&quot;</code></h1>

<pre><code class="language-r">x &lt;- seq(-4, 4, 0.1)
plot(x, dnorm(x, 0, 1), type = &quot;l&quot;, main = expression(sigma == 1))
plot(x, dnorm(x, 0, 3), type = &quot;l&quot;, main = expression(sigma == 3))
</code></pre>

<p><img src="../assets/fig/figShowHold-1.png" alt="plot of chunk figShowHold" />
<img src="../assets/fig/figShowHold-2.png" alt="plot of chunk figShowHold" /></p>

<hr />

<h2 id="inline-code">Inline code</h2>

<p>A single back tick followed by <code>r</code> prooduces inline code to be evaluated.</p>

<div align = "center">
<img src = ../assets/img/inlineCode.png width = 700 height = 80>
</div>

<p>This is an example of inline code, where I want to refer to the sum of <code>a</code> and
  <code>b</code>, which is 8.</p>

<p>This is <em>extremely</em> useful in writing reports. Never have to update any
numbers in text, regardless of changes to your models or data (if you are
careful about it).</p>

<hr />

<h2 id="real-example">Real example</h2>

<p><img src="../assets/img/ell_means.png" alt="ell_means" /></p>

<hr />

<h2 id="setting-global-options">Setting global options</h2>

<p>Change the default behavior</p>

<pre><code class="language-r">opts_chunk$set(options)
</code></pre>

<p><br></p>

<p>For example, you can set <code>echo = FALSE</code> and <code>fig.width = 6.5</code> and <code>fig.height = 8</code> with the following code.</p>

<pre><code class="language-r">opts_chunk$set(echo = FALSE, fig.width = 6.5, fig.height = 8)
</code></pre>

<p>This is most useful when producing a report for somebody who doesn&rsquo;t use R and has no use or knowledge of the code.</p>

<p>You can always override the defaults (global options) within a particular chunk, e.g.</p>

<p>```{r, chunkName, echo = TRUE}
<br>
<br>
```</p>

<hr />

<h2 id="other-things-to-consider-setting-globally">Other things to consider setting globally:</h2>

<ul>
<li><code>warnings = FALSE</code></li>
<li><code>message = FALSE</code></li>
<li><code>errors = TRUE</code></li>
<li><code>echo = FALSE</code></li>
<li>Caching options (next slides)</li>
</ul>

<hr />

<h2 id="caching-briefly">Caching (briefly)</h2>

<p>Somewhat complicated</p>

<ul>
<li>When chunks take a long time to process, it is usually a good idea to <em>cache</em>
them.

<ul>
<li>Create temporary files with the results of the chunk</li>
<li>These files are then called when the document is rendered, and do not need to be re-run, provided <strong>nothing in the chunk has changed</strong>.</li>
<li>Often, chunks may depend on the results of previous chunks. These are
<em>dependencies</em>. All dependencies must then be updated, if a chunk with dependencies is updated.</li>
<li>You can declare dependencies manually or automatically</li>
</ul></li>
</ul>

<hr />

<h2 id="cache">cache</h2>

<p><img src="../assets/img/cacheFolders.png" alt="cacheFolders" /></p>

<ul>
<li>Cache files are named according to your chunk names (why it&rsquo;s important to
name your chunks)</li>
<li>Note that some packages that use <em>knitr</em> (i.e., <em>slidify</em>, which was used to
produce these slides), will cache for you automatically. And the slidify
cache is in a hidden folder (which can be really annoying)</li>
</ul>

<hr />

<h2 id="declaring-dependencies-manually">Declaring dependencies manually</h2>

<div align = "left">
<img src = ../assets/img/dependson.png width = 1000 height = 400>
</div>

<hr />

<pre><code class="language-r">boys &lt;- c(25, 32, 11, 54)
girls &lt;- c(30, 29, 22, 43)
mean(boys)
</code></pre>

<pre><code>## [1] 30.5
</code></pre>

<pre><code class="language-r">mean(girls)
</code></pre>

<pre><code>## [1] 31
</code></pre>

<p>As can be seen, boys scored -0.5 points different than girls. Below is a histogram of each.</p>

<pre><code class="language-r">par(mfrow = c(1,2))
hist(boys)
hist(girls)
</code></pre>

<p><img src="../assets/fig/histograms-1.png" alt="plot of chunk histograms" /></p>

<hr />

<h2 id="better-option-generally">Better option (generally)</h2>

<p>Set caching to be automatic, with the dependencies automatically determined. Use global options.</p>

<pre><code class="language-r">opts_chunk$set(cache = TRUE, autodep = TRUE)

dep_auto()
</code></pre>

<p>Note that <code>dep_auto()</code> is a function that must be run on its own (which finds the dependencies).</p>

<hr />

<h2 id="confused">Confused?</h2>

<p>Don&rsquo;t worry, be happy
* If much of the caching part makes little to no sense to you, don&rsquo;t worry, it&rsquo;s not that big of a deal.
* Getting your document to render is the biggest deal. Caching can just help speed things up some (and a lot in some cases).</p>

<hr />

<h2 id="citations">Citations</h2>

<p>To include references in your paper, you must:</p>

<ul>
<li>Create an external .bib file using LaTeX formatting (we&rsquo;ll get to this)</li>
<li>Include <code>bibliography: nameOfYourBibFile.bib</code> in your YAML front matter.</li>
<li>Refer to the citations in text using <code>@</code></li>
</ul>

<hr />

<h2 id="creating-a-bib-doc">Creating a .bib doc</h2>

<p><img src="../assets/img/googleScholarSearch.png" alt="googleScholarSearch" />
<img src="../assets/img/googleCite.png" alt="googleCite" /></p>

<p><img src="../assets/img/googleBibTex.png" alt="googleBibTex" />
<img src="../assets/img/bibEntry.png" alt="bibEntry" /></p>

<hr />

<h2 id="in-text-citations">In text citations</h2>

<table>
<thead>
<tr>
<th align="left">Citation Style</th>
<th align="left">Output</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">@Briggs11</td>
<td align="left">Briggs and Weeks (2011)</td>
</tr>

<tr>
<td align="left">[see @Baldwin2014; @Caruso2000]</td>
<td align="left">(see Baldwin et al. 2014; Caruso 2000)</td>
</tr>

<tr>
<td align="left">[@Linn02, p. 9]</td>
<td align="left">(Linn and Haug 2002, 9)</td>
</tr>

<tr>
<td align="left">[-@Goldhaber08]</td>
<td align="left">(2008)</td>
</tr>
</tbody>
</table>

<p><br></p>

<p>Note this is not APA. However, references are included automatically at the end of the document. Include <code># References</code> as the last line of your document to give it a title.</p>

<hr />

<h2 id="a-few-real-examples">A few real examples</h2>

<p><img src="../assets/img/intext_ref1.png" alt="intext_ref1" />
<img src="../assets/img/intext_ref2.png" alt="intext_ref2" />
<img src="../assets/img/intext_ref3.png" alt="intext_ref3" /></p>

<hr />

<h2 id="references">References</h2>

<p><img src="../assets/img/references.png" alt="references" /></p>

<hr />

<h2 id="let-s-try">Let&rsquo;s try!</h2>

<p>[demo first]</p>

<ul>
<li>Open R Studio

<ul>
<li>Open a new Rmd document</li>
</ul></li>
<li>In your YAML, add a new line for <code>bibliography:</code>. Follow this with the name of your bibliography file, which should be in the same directory, and should be the bare name (not in quotes).</li>
<li>Open a text file, save it with a <code>.bib</code> extension.</li>
<li>Go to google Scholar and find a reference to cite. Copy and paste the citation into your .bib file using google&rsquo;s cite option.</li>
<li>Include a reference to the citation in your Rmd file and render it. Include a page break so your citations are on a separate page.</li>
</ul>

<hr />

<h2 id="other-potential-option">Other potential option</h2>

<ul>
<li>Add a GUI-like interface with <em>citr</em>

<ul>
<li>written by the same author who wrote the APA R Markdown documentation</li>
</ul></li>
</ul>

<p>See <a href="https://github.com/crsh/citr">https://github.com/crsh/citr</a></p>

<hr />

<h2 id="writing-a-paper-in-apa-style">Writing a paper in apa style</h2>

<p>Use the <em>papaja</em> package</p>

<pre><code class="language-r">library(devtools)
install_github(&quot;crsh/papaja&quot;)
</code></pre>

<ul>
<li>Full Documentation available here: <a href="https://crsh.github.io/papaja_man/index.html">https://crsh.github.io/papaja_man/index.html</a></li>
</ul>

<hr />

<h2 id="template">Template</h2>

<div align = "left">
<img src = ../assets/img/papaja_template.png width = 600 height = 500>
</div>

<div align = "right">
<img src = ../assets/img/template_code.png width = 400 height = 500>
</div>

<hr />

<h2 id="apa-tables">APA Tables</h2>

<pre><code class="language-r">papaja::apa_table(head(mtcars))
</code></pre>

<p><img src="../assets/img/apa_table.png" alt="apa_table" /></p>

<hr />

<h2 id="let-s-play">Let&rsquo;s play!</h2>

<ul>
<li>Install papaja</li>
<li>Start a new document from a template</li>
<li>Render it!</li>
<li>Add a bibliography!</li>
<li>Just for fun, try changing the <code>class</code> to <code>jou</code> instead of <code>man</code></li>
</ul>

<p>Note: I&rsquo;m not sure what the <code>r_refs(file = &quot;r-references.bib&quot;)</code> part is all about. I just delete it and use the normal method. Let me know if you figure it out!</p>

<hr />

<h2 id="slides">Slides</h2>

<ul>
<li>I&rsquo;ve mentioned a number of times that these slides were produced with a varient of RMarkdown. The varient I use is called <em>slidify</em>

<ul>
<li>see <a href="http://slidify.org">http://slidify.org</a></li>
</ul></li>
</ul>

<div align = "left">
<img src = ../assets/img/slidify.png width = 1000 height = 500>
</div>

<hr />

<h2 id="probably-easier-way">Probably easier way</h2>

<ul>
<li>RStudio Presentations</li>
</ul>

<div align = "left">
<img src = ../assets/img/slides.png width = 750 height = 500>
</div>

<hr />

<div align = "center">
<img src = ../assets/img/slides2.png width = 750 height = 750>
</div>

<hr />

<p><img src="../assets/img/slide_example.png" alt="slide_example" /></p>

<hr />

<h2 id="want-to-customize-further">Want to customize further?</h2>

<p>The YAML will control a lot of how a document looks. For example, if you wanted to render with a different syntax highlighter:</p>

<h1 id="standard-rmd">Standard Rmd</h1>

<pre><code>---
title: &quot;Doc Title&quot;
output:
  pdf_document:
    highlight: kate
---
</code></pre>

<h1 id="papaja">papaja</h1>

<pre><code>---
title: &quot;Doc Title&quot;
output: 
  papaja::apa6_pdf:
    highlight: kate
---
</code></pre>

<hr />

<h2 id="last-note">Last note</h2>

<ul>
<li>For the homework, I&rsquo;ll ask you to create a pdf.</li>
<li>Install a TeX distribution for it to work

<ul>
<li>Mac download: <a href="http://tug.org/mactex/">http://tug.org/mactex/</a></li>
<li>Windows download: <a href="https://miktex.org">https://miktex.org</a></li>
</ul></li>
<li>Note the distributions are pretty big (couple gigs), but you&rsquo;ll need it.</li>
</ul>

<hr />

<h2 id="other-formats">Other formats</h2>

<ul>
<li>blogdown: <a href="https://bookdown.org/yihui/blogdown/">https://bookdown.org/yihui/blogdown/</a></li>
<li>bookdown: <a href="https://bookdown.org/yihui/bookdown/">https://bookdown.org/yihui/bookdown/</a></li>
</ul>

<p>(lots of others but these are cool)</p>

<div align = "right">
<img src = ../assets/img/xiedown.png width = 300 height = 300>
</div>

<hr />

<h2 id="include-animations">Include animations</h2>

<ul>
<li>htmlwidgets: <a href="http://www.htmlwidgets.org">http://www.htmlwidgets.org</a></li>
</ul>

<p><img src="../assets/img/htmlwidgets.png" alt="htmlwidgets" /></p>

<hr />

<h2 id="plotly">plotly</h2>

<ul>
<li><p>You can use plotly along with ggplot to create interactive graphics (see <a href="https://plot.ly/ggplot2/">https://plot.ly/ggplot2/</a>)</p></li>

<li><p>Easiest example: Use the <code>ggplotly</code> function</p></li>
</ul>

<pre><code class="language-r">p &lt;- ggplot(mpg, aes(manufacturer, hwy, fill = class)) + geom_bar(stat = &quot;identity&quot;)

library(plotly)
ggplotly(p)
</code></pre>

<hr />

<h2 id="floating-toc">Floating TOC</h2>

<p>Example from some consulting I did recently</p>

<pre><code>---
title: &quot;Exploring Treatment Effect Variance&quot;
author: &quot;Daniel Anderson&quot;
date: &quot;February 24, 2017&quot;
output: 
  html_document:
    toc: true
    toc_float: true
    code_folding: &quot;hide&quot;
---
</code></pre>

  </div>
</article>
        </div>
        
  <div id="disqus_thread"></div>
    <script type="text/javascript">
    (function() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'http-www-dandersondata-com';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  

  
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:daniela@uoregon.edu" class="iconfont icon-email" title="email"></a>
      <a href="https://stackoverflow.com/users/4959854/daniel-anderson" class="iconfont icon-stack-overflow" title="stack-overflow"></a>
      <a href="https://twitter.com/DJAnderson_07" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://github.com/DJAnderson07" class="iconfont icon-github" title="github"></a>
  <a href="/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme based on 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    
      2017 - 
    2018
    <span class="author">Daniel Anderson</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/lib/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>
<script type="text/javascript" src="/dist/even.min.js?v=3.0.1"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>








</body>
</html>
